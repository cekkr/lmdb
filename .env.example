# DB-SLM configuration template.
# Copy this file to `.env` and customise the values for your environment.

# cheetah-db is the canonical backend. Leave this on `cheetah-db` unless you are doing a one-off
# SQLite export or the Go service is genuinely unavailable.
DBSLM_BACKEND=cheetah-db
DBSLM_SQLITE_PATH=var/db_slm.sqlite3

# Primary cheetah-db target. Host/port must match the listening cheetah-db server.
# Use a concrete address (e.g., 127.0.0.1 or your LAN IP); do NOT set 0.0.0.0, which is listen-only.
DBSLM_CHEETAH_HOST=127.0.0.1
DBSLM_CHEETAH_PORT=4455
DBSLM_CHEETAH_TIMEOUT_SECONDS=120.0
# Maximum time the Python client will wait for a cheetah response before reconnecting.
# Leave unset to auto-scale to max(DBSLM_CHEETAH_TIMEOUT_SECONDS * 180, 60).
# DBSLM_CHEETAH_IDLE_GRACE_SECONDS=300
# Clamp the derived idle grace so we bail out of stalled reducers within ~5 minutes (set to 0 to disable).
DBSLM_CHEETAH_IDLE_GRACE_CAP_SECONDS=300
# Queue reducer jobs asynchronously so the Python side never idles on long PAIR_REDUCE calls.
CHEETAH_REDUCE_ASYNC=1
# Poll interval (in seconds) for PAIR_REDUCE_FETCH when async reducers are enabled.
CHEETAH_REDUCE_POLL_INTERVAL_SECONDS=5
# On WSL2 with cheetah running on Windows, set DBSLM_CHEETAH_HOST to the Windows host IP
# listed under the first nameserver entry in /etc/resolv.conf.
# Example cheetah database name (use when the server is multi-tenant):
# DBSLM_CHEETAH_DATABASE=default

# Emotion-rich dataset used for bootstrapping the statistical tables.
# DBSLM_DATASET_PATH=datasets/emotion_data.json

# Controls for the external embedding model used during sentence segmentation.
DBSLM_EMBEDDER_MODEL=all-MiniLM-L6-v2

# SQLite memory guardrails when running in SQLite-only mode (that should deprecated).
DBSLM_SQLITE_FLUSH_THRESHOLD_MB=1024
DBSLM_SQLITE_FLUSH_BATCH=500
DBSLM_SQLITE_FLUSH_COLD_THRESHOLD=2

# Fallback reminder: switch to SQLite only for temporary exports or when explicitly requested.
# Example: DBSLM_BACKEND=sqlite
# DBSLM_SQLITE_PATH=var/db_slm.sqlite3
